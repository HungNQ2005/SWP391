<%-- 
    Document   : managecdkey
    Created on : Oct 1, 2025, 4:21:06 PM
    Author     : Nguyen Quoc Hung - CE190870
--%>

<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>CD Key Management</title>
</head>
<body>
    <h2>CD Key Management</h2>

    <!-- Form tạo key -->
    <form action="${pageContext.request.contextPath}/admin/cdkey" method="post">
        <label>Số lượng Key:</label>
        <input type="number" name="count" min="1" required />
        <button type="submit">Generate</button>
    </form>

    <hr/>

    <h3>Danh sách CD Key</h3>
    <table border="1" cellpadding="5">
        <tr>
            <th>ID</th>
            <th>Code</th>
            <th>Status</th>
            <th>Generated By</th>
            <th>Generated Time</th>
        </tr>
        <c:forEach var="key" items="${cdKeyList}">
            <tr>
                <td>${key.keyID}</td>
                <td>${key.keyCode}</td>
                <td>${key.keyStatus}</td>
                <td>${key.keyGeneratedBy}</td>
                <td>${key.keyGeneratedTime}</td>
            </tr>
        </c:forEach>
    </table>

    <!-- Phân trang -->
    <div>
        <c:forEach var="i" begin="1" end="${totalPages}">
            <c:choose>
                <c:when test="${i == currentPage}">
                    <b>${i}</b>
                </c:when>
                <c:otherwise>
                    <a href="${pageContext.request.contextPath}/admin/cdkey?page=${i}">${i}</a>
                </c:otherwise>
            </c:choose>
        </c:forEach>
    </div>

</body>
</html>
